var list=function(){var f=function(a){return a._table&&a.next?true:false},d=function(a){return a&&typeof a==="object"&&a.constructor===Array?true:Object.prototype.toString.call(a)=="[object Array]"?true:false},g=function(a,b){var c,e=typeof a;if(a===b)return true;if(e!==typeof b)return false;if(d(a)&&d(b)){if(a.length!==b.length)return false;for(c=0;c<a.length;c+=1)if(a[c]!==b[c])return false;return true}if(e!=="object")return false;if(Object.keys(a).length!==Object.keys(b).length)return false;for(c in a){if(!b.hasOwnProperty(c))return false; if(a.hasOwnProperty(c)&&b.hasOwnProperty(c))return g(a[c],b[c])}return true},h=function(a){var b,c={};f(a)?c=list():d(a)&&(c=[]);for(b in a)if(a.hasOwnProperty(b))if(typeof a[b]==="string"||typeof a[b]==="number"||typeof a[b]==="boolean")c[b]=a[b];else if(typeof a[b]==="object"||d(a))c[b]=h(a[b]);return c};return{_table:{},_next:void 0,get:function(a){if(this._table.hasOwnProperty(a))return this._table[a]},add:function(a,b){return this._table[a]=b},remove:function(a){var b;if(f(a))for(;b=a.next();)delete this._table[b]; else if(d(a))for(;a.length!==0;)delete this._table[a.pop()];else return b=this._table[a],delete this._table[a],b},take:function(a){for(var b,c=[];(b=this.next())&&a--;)c.push([b,this._table[b]]),this.remove(b);return c},keys:function(){return Object.keys(this._table)},values:function(){var a,b,c=this,e=[];this.each(function(d){b=false;for(a=e.length;a--&&!b;)c.get(d)===e[a]&&(b=true);b||e.push(c.get(d))});return e},items:function(){var a=[],b=this;this.each(function(c){a.push([c,b._table[c]])});return a}, len:function(){var a=0;this.each(function(){a+=1});return a},clear:function(){this._table={}},hasKey:function(a){return this.get(a)!==void 0},pop:function(a,b){if(this.hasKey(a))this.remove(a);else return b},popItem:function(){var a;a=this.keys();if(a.length!==0)return a=[a[0]],a.push(this.remove(a[0])),a},update:function(a){var b=this;a.each(function(c){b._table[c]=a.get(c)})},copy:function(){var a=list();a.update(h(this));return a},each:function(a){for(var b in this._table)this._table.hasOwnProperty(b)&& a(b)},next:function(){if(this._next!==void 0&&this._next.length!==0)return this._next.pop();else if(this._next===void 0)return this._next=this.keys().reverse(),this._next.pop();else if(this._next.length===0)return this._next=void 0},object:function(){return this._table},isEqual:function(a){return!f(a)?false:g(this._table,a._table)}}};